# F3EO 变体失败合集：Hessian-Fisher 等价性谬误

> 本文总结 F3EO 系列优化器的失败尝试。核心结论：所有基于`H·g`的三阶优化都建立在一个致命假设之上——即 Hessian-Fisher 等价性，而该假设在持续学习（CL）场景中根本不成立。

## 1. 核心论断：几何与统计的错位

Hessian-Fisher 等价性（`H ≈ ℱ`）要求模型已收敛到真实数据分布。CL 场景的动态数据流（`p_t(x, y)`）破坏了此前提，导致等价性失效。

我们所有失败的本质，都是在用 Hessian（描述参数空间**几何曲率**）去错误地代理 Fisher 信息（描述梯度**统计方差**）。这相当于用一个关于“收敛速度”的量，去解决一个关于“数据适应性”的问题。

- **Hessian** 回答：“移动参数，梯度会如何变化？” (几何)
- **Fisher** 回答：“改变数据，梯度会如何变化？” (统计)

## 2. 失败模式矩阵

| 变体系列| 核心机制  | 根本缺陷| 状态|
| ----- | ------ | -- | ------- | ---- | -- |
| **F3EPI**    | `β = tanh(log(PI))` | 单一控制器无法解耦探索与正则化这两个冲突目标。  | 完全废弃 |
| **F3EWD**    | `H·g`探索 + PI 引导的权重衰减 | 解耦方向正确，但`H·g`部分仍基于错误假设，且实现复杂。| 理论过时 |
| **AdaF3E**   | `Δθ = -η·m / (√v + α·    | H·g| )`  | 将三阶项作为预处理器，但仍是 Hessian-Fisher 错配。 | 理论缺陷 |
| **F3E-Warp** | `g_update = –2Hg`   | 缺少梯度项`g`作为锚点，陷入“零梯度-随机准确率”死区。 | 假设证伪 |
| **RSA-NG**   | Ricci 流平滑 Fisher 流形 | 引入对度量张量的二阶微分，需`O(d⁴)`的四阶矩，计算不可行。 | 计算灾难 |

## 3. 相关案例与教训

- **数据语义破坏**: 在`wikitext-2`任务中，`Concatenate and Chunk`策略在文章边界制造了噪声，导致模型过早过拟合，这验证了数据质量的优先性。
- **外部库问题**: 对`AdaFisher`的分析发现，其论文结果源于一个实现 Bug（`gammas`参数被忽略），这警示我们必须对外部工具进行严格验证。

## 4. 唯一幸存者与未来方向

**PIWD (Predictive-Integrity-Guided Weight Decay)** 是从 F3EWD 中剥离的成功机制。它不依赖 Hessian-Fisher 等价性，仅用`PI`驱动自适应权重衰减，理论自洽且有效。目前也用于其他`ACG（Adaptive Cocktail Gradient）`。

## 5. 已废弃的理论框架

### PI-Muon 框架 (2025-11-12)

**状态**: 完全废弃，理论过时

**核心缺陷**:

- **几何不相容性**: 线性混合 `g_update = (1-λ)g_fisher + λg_muon` 是在两个不同流形的测地线之间做向量加法
- **功能冗余性**: KFAC 本身就是在线 EWC，Muon 的启发式约束反而干扰了 Fisher 信息的精确计算
- **归因困境**: 全局 PI 无法告诉我们是哪个参数导致了"意外"

**替代方案**: FOG (Fisher-Orthogonal-Gradient) 优化器采用算子复合范式：

```math
g_update = Structural_Op( Statistical_Op( Raw_Gradient ) )
```

实现了统计适应性与结构稳定性的非冲突协同，CIFAR-10 上取得 +10.74% 准确率提升。

**未来方向**: 彻底抛弃 Hessian，转向寻找计算上可行的**真·Fisher 信息代理**。所有基于`H·g`的路线已被证伪。
