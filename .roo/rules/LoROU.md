# LoROU: Low-Rank Orthogonalized Update (猜想)

> **状态**：[理论猜想与实验计划]
> **核心命题**：稀疏性可能不是架构的属性，而是**优化动力学**的内生属性。

## 1. 隐式 NSU 假设 (Implicit Native Sparse Update)

### 1.1 核心观点

Muon 和 SAM 通过最小化更新量中的冗余（正交化）和平坦度约束，实际上是在执行**隐式的秩最小化 (Implicit Rank Minimization)**。

### 1.2 机制解析

[`RMSuon`](optimizer/rmsuon.py:1) 的正交化投影 `𝒫ₛₜ(G)` 强迫更新量集中在正交基上，消除了共线性噪音。这解释了其高效性：它在更新层面剔除了“噪音”，只保留了“信号”，从而实现了“功能性稀疏”。

### 1.3 范式转移

- **旧范式**: 显式稀疏架构 (Sparse Architecture, e.g., MoE) + 稠密优化器。
- **新范式**: 稠密架构 (Dense Architecture) + 稀疏优化器 (Sparse Optimizer, e.g., ARS2-Neo/LoROU)。
- **对偶性**: 如果 ΔW 本身是低秩的，那么稠密矩阵乘法在功能上等价于稀疏路由。

## 2. 验证计划：谱熵监控 (Spectral Entropy Monitor)

为了验证这一假设，我们需要从“可观测性”入手，而非盲目修改算法。

- **目标**: 验证 RMSuon 是否在训练过程中自动导致 ΔW 的奇异值分布发生坍缩（低秩化）。
- **探针设计**: 监控更新矩阵的**谱熵 (Spectral Entropy)**。
  - 定义归一化奇异值: `pᵢ = σᵢ / Σₖ σₖ`
  - 计算谱熵: `H(S) = -Σ pᵢ log(pᵢ)`
- **预期信号**: 随着训练进行，RMSuon 的更新量谱熵应显著低于 SGD/Adam，表明其自动发现了参数空间的低维流形。

## 3. 演进路径：从隐式动力学到显式架构

> "优化器诱导的稀疏性并不否定架构先验的价值。相反，显式稀疏架构（如 DynTRM）为优化器提供了更符合其动力学的几何流形。"

### 3.1 验证：激活值 SVD (The X-Ray)

- **目标**: 验证 Muon 是否诱导了**正交子网络**。
- **方法**: 对激活值 H 进行 SVD。如果前 k 个奇异向量解释了绝大部分方差，且与特定任务高度相关，则证明了隐式路由的存在。Muon 的正交化更新本质上是在最大化特征区分度（类似 PCA），引导参数自适应分配给不同特征。

### 3.2 架构协同：寻找更好的先验

虽然优化器能诱导功能稀疏性，但**显式稀疏架构**（如 `../Tiny-ONN/exp/arc_dyntrm` 中的 `DynSIHA`）提供了更优的初始拓扑和硬件优化空间。
DynSIHA/PACR 的正确训练方式依然有待技术攻关，SARS (Surprise-Aware Routing Shaping) 的实际效果不佳，需要更多研究。
